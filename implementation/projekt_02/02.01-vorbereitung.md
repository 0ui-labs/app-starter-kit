# 02.01 - Vorbereitung: Aktuelle Implementation analysieren

## Ziel
Analyse der aktuellen PrismaClient Implementation und Sicherung des bestehenden Codes als Fallback.

## Schritte

### 1. Aktuelle Implementation prüfen
```bash
# Zeige aktuelle db/index.ts
cat packages/db/index.ts
```

**Erwarteter Output:**
```typescript
export const db = new PrismaClient();
```

### 2. Backup erstellen
```bash
# Backup der aktuellen Version
cp packages/db/index.ts packages/db/index.ts.backup
```

### 3. Dependencies verifizieren
```bash
# Prüfe Prisma Version
cd packages/db
npm list @prisma/client prisma
```

**Erwartete Versionen:**
- `@prisma/client`: 6.1.0
- `prisma`: 6.1.0

### 4. Database URL prüfen
```bash
# Stelle sicher dass DATABASE_URL gesetzt ist
grep DATABASE_URL .env
```

**Wichtig:** DATABASE_URL muss in `.env` definiert sein!

### 5. Import-Analyse durchführen
```bash
# Finde alle Stellen die @starter-kit/db importieren
grep -r "from '@starter-kit/db'" apps/
grep -r "from '@starter-kit/db'" packages/
```

**Zweck:** Verstehen wo überall der PrismaClient verwendet wird.

## Checkliste
- [ ] Aktuelle `packages/db/index.ts` geprüft
- [ ] Backup erstellt als `index.ts.backup`
- [ ] Prisma Versionen verifiziert (6.1.0)
- [ ] DATABASE_URL in `.env` vorhanden
- [ ] Import-Stellen dokumentiert

## Nächster Schritt
→ [02.02 - Singleton Implementation](./02.02-singleton-implementation.md)

## Rollback bei Problemen
```bash
# Wiederherstellen der Original-Version
cp packages/db/index.ts.backup packages/db/index.ts
```