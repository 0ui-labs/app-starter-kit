# Arbeitspaket 04.04: Auth Components

## Ziel
Erstellung wiederverwendbarer Auth UI Components mit Tailwind Styling.

## Vorbedingungen
- [ ] @clerk/nextjs ist installiert
- [ ] @starter-kit/ui Package funktioniert
- [ ] Tailwind CSS konfiguriert

## Implementierung

### Schritt 1: UserButton Component
Erstelle `apps/web/src/components/auth/user-button.tsx`:

```typescript
'use client';

import { UserButton as ClerkUserButton } from '@clerk/nextjs';

export function UserButton() {
  return (
    <ClerkUserButton
      appearance={{
        elements: {
          avatarBox: 'h-10 w-10',
          userButtonTrigger: 'focus:shadow-md',
          userButtonPopoverCard: 'shadow-lg',
        },
      }}
      afterSignOutUrl="/"
    />
  );
}
```

### Schritt 2: SignInButton Component
Erstelle `apps/web/src/components/auth/sign-in-button.tsx`:

```typescript
'use client';

import { SignInButton as ClerkSignInButton } from '@clerk/nextjs';
import { Button } from '@starter-kit/ui';

interface SignInButtonProps {
  mode?: 'redirect' | 'modal';
  children?: React.ReactNode;
}

export function SignInButton({ mode = 'modal', children }: SignInButtonProps) {
  return (
    <ClerkSignInButton mode={mode}>
      {children || <Button>Anmelden</Button>}
    </ClerkSignInButton>
  );
}
```

### Schritt 3: SignOutButton Component
Erstelle `apps/web/src/components/auth/sign-out-button.tsx`:

```typescript
'use client';

import { SignOutButton as ClerkSignOutButton } from '@clerk/nextjs';
import { Button } from '@starter-kit/ui';

interface SignOutButtonProps {
  children?: React.ReactNode;
}

export function SignOutButton({ children }: SignOutButtonProps) {
  return (
    <ClerkSignOutButton>
      {children || <Button variant="outline">Abmelden</Button>}
    </ClerkSignOutButton>
  );
}
```

### Schritt 4: Auth Status Component (Optional)
Erstelle `apps/web/src/components/auth/auth-status.tsx`:

```typescript
'use client';

import { useAuth } from '@clerk/nextjs';

export function AuthStatus() {
  const { isLoaded, isSignedIn, userId } = useAuth();

  if (!isLoaded) {
    return <div className="text-sm text-gray-500">Lädt...</div>;
  }

  if (!isSignedIn) {
    return <div className="text-sm text-gray-500">Nicht angemeldet</div>;
  }

  return (
    <div className="text-sm text-gray-600">
      Angemeldet als: {userId}
    </div>
  );
}
```

## Verwendungsbeispiele

### In Navigation
```typescript
import { UserButton } from '@/components/auth/user-button';
import { SignInButton } from '@/components/auth/sign-in-button';

export function Navigation({ isSignedIn }: { isSignedIn: boolean }) {
  return (
    <nav>
      {isSignedIn ? <UserButton /> : <SignInButton />}
    </nav>
  );
}
```

## Verifizierung
1. Components rendern ohne Fehler
2. UserButton zeigt Avatar
3. SignInButton öffnet Modal/Redirect
4. SignOutButton meldet User ab

## Erfolgskriterien
- [ ] UserButton Component funktioniert
- [ ] SignInButton mit Modal und Redirect Mode
- [ ] SignOutButton meldet korrekt ab
- [ ] Alle Components haben 'use client' Directive
- [ ] TypeScript Types sind korrekt

## Zeitschätzung: 15 Minuten

## Nächster Schritt
→ 04.05: Auth Pages