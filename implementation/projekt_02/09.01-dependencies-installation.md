# Task 09.01: Dependencies Installation - Testing Frameworks

## Ziel
Installation aller benötigten Testing-Dependencies für Unit Tests, Integration Tests, E2E Tests und Mocking.

## Kontext
- Vitest ist bereits als Dev-Dependency vorhanden
- React 19 benötigt spezielle Versionen von Testing Library
- MSW für API Mocking
- Faker.js für Testdaten-Generierung
- Playwright für E2E Tests

## Implementierung

### Schritt 1: Testing Frameworks installieren
```bash
# Core Testing Tools
npm install -D @vitest/coverage-v8 @vitest/ui
```

### Schritt 2: React Testing Library (React 19 kompatibel!)
```bash
# WICHTIG: Diese Versionen sind React 19 kompatibel
npm install -D @testing-library/react@^16.3.0 @testing-library/dom@^10.0.0 @testing-library/jest-dom @testing-library/user-event
```

### Schritt 3: Mocking Tools
```bash
# Mock Service Worker für API Mocking
npm install -D msw
```

### Schritt 4: Test Data Generation
```bash
# Faker.js für realistische Testdaten
npm install -D @faker-js/faker
```

### Schritt 5: E2E Testing Framework
```bash
# Playwright für End-to-End Tests
npm install -D @playwright/test

# Playwright Browsers installieren (Chrome, Firefox, Safari)
npx playwright install
```

### Schritt 6: Optional - Type Definitions
```bash
# Falls TypeScript Typen fehlen (normalerweise inkludiert)
npm install -D @types/node
```

## Verifizierung

### Test 1: Check package.json
```bash
cat package.json | grep "@testing-library/react"
# Sollte Version ^16.3.0 oder höher zeigen
```

### Test 2: MSW Version Check
```bash
npm list msw
# Sollte installierte MSW Version zeigen
```

### Test 3: Playwright Installation
```bash
npx playwright --version
# Sollte Playwright Version ausgeben
```

### Test 4: Check Browsers
```bash
npx playwright show-report
# Sollte ohne Fehler laufen (auch wenn noch keine Reports existieren)
```

## Erfolgskriterien
- [ ] @vitest/coverage-v8 installiert
- [ ] @vitest/ui installiert
- [ ] @testing-library/react v16.3.0+ installiert (React 19 kompatibel)
- [ ] @testing-library/dom v10.0.0+ installiert
- [ ] @testing-library/jest-dom installiert
- [ ] @testing-library/user-event installiert
- [ ] msw installiert
- [ ] @faker-js/faker installiert
- [ ] @playwright/test installiert
- [ ] Playwright Browsers installiert
- [ ] Keine Dependency-Konflikte

## Wichtige Hinweise

### React 19 Kompatibilität
**KRITISCH**: Verwende NICHT ältere Versionen von @testing-library/react!
- `@testing-library/react@^16.3.0` oder höher für React 19
- `@testing-library/dom@^10.0.0` ist jetzt eine Peer Dependency

### Playwright Browsers
Die Browser-Installation kann einige Minuten dauern und benötigt ca. 500MB Speicherplatz.

### MSW Service Worker
MSW benötigt später einen Service Worker für Browser-Tests. Dies wird in Task 09.03 konfiguriert.

## Potentielle Probleme

### Problem: npm install schlägt fehl
**Lösung**: Cache leeren und erneut versuchen
```bash
npm cache clean --force
npm install
```

### Problem: Playwright Browsers Installation hängt
**Lösung**: Mit spezifischen Browsern versuchen
```bash
npx playwright install chromium
```

### Problem: Version Konflikte
**Lösung**: Peer Dependencies prüfen
```bash
npm ls
```

## Rollback Plan
Falls Installation fehlschlägt:
```bash
git checkout -- package.json package-lock.json
npm install
```

## Zeitschätzung
- npm install Befehle: 5 Minuten
- Playwright Browser Download: 5 Minuten
- Verifizierung: 2 Minuten
- **Total: 12 Minuten**

## Nächster Schritt
Nach erfolgreicher Installation → [09.02 Testing Configuration](./09.02-testing-configuration.md)